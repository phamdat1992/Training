(*   Cham DETAILS  *)
uses crt;
const
   fin: string = 'DETAILS.IN0';
   fou: string = 'DETAILS.OUT';
   dapso: array['0'..'9'] of integer =
   (628,
   8,
   8,
   8,
   3,
   10,
   50,
   3,
   3,
   710);
type
    arr1d = array[1..200] of integer;
var
   a: array[1..200] of ^arr1d;
   lich, sel: arr1d;
   k,n,x0,y0,max:integer;
   i, diem: integer;
   chon: char;
   Ok: boolean;
   f: text;

procedure Nhapdl;
var i, j: integer;
begin
    assign(f, fin); reset(f);
    readln(f, n);
    for i:=1 to n do
       for j:=1 to n do
       begin
           read(f, a[i]^[j]);
       end;
    close(f);
end;


procedure Cham;
var s: string;
    ds, tmin: integer;
    code: integer;

begin
   diem:=0;
   assign(f,fou); reset(f);
   readln(f,s);
   for i:=1 to n do read(f, lich[i]);
   close(f);
   val(s,ds,code);
   if code<>0 then
   begin
       writeln('????????????????????????????????????????????????');
       writeln('          E R R O R: Loi file ket qua!');
       writeln('           Tim duoc: ',s);
       writeln('?????????????????????????????????????????????????');
       exit;
   end;
   if ds> dapso[chon] then
   begin
       writeln('????????????????????????????????????????????????');
       writeln('          E R R O R: Khong dung dap so!');
       writeln('?????????????????????????????????????????????????');
       exit;
   end;
   writeln('Check solution');
   tmin:=0;
   for i:=1 to n do sel[i]:=0;
   for i:=1 to n do
   begin
       if (lich[i]<=0) or (lich[i]>n) then
       begin
           writeln('????????????????????????????????????????????????');
           writeln('          E R R O R: Loi chi so cong viec!');
           writeln('?????????????????????????????????????????????????');
           exit;
       end;
       if sel[lich[i]]>0 then
       begin
           writeln('????????????????????????????????????????????????');
           writeln('               E R R O R: ');
           writeln('   Cong viec ', lich[i],' xuat hien qua 1 lan!');
           writeln('?????????????????????????????????????????????????');
           exit;
       end
       else sel[lich[i]]:=1;
       if tmin<a[i]^[lich[i]] then tmin:= a[i]^[lich[i]];
   end;
   if tmin<>ds then
   begin
       writeln('????????????????????????????????????????????????');
       writeln('               E R R O R: ');
       writeln('        Dap so khong trung voi lich!');
       writeln('?????????????????????????????????????????????????');
       exit;
   end;
   diem:=1;
   writeln;
   writeln('###################################');
   writeln('         P E R F E C T !');
   writeln('###################################');
end;

BEGIN
    for i:=1 to 200 do new(a[i]);
    clrscr;
    writeln('           ============================================');
    writeln('                   CHUONG TRINH CHAM BAI: DETAILS');
    writeln('                    written by Nguyen Duc Nghia ');
    writeln('           ============================================');
    write  ('                 Cho ten file du lieu: DETAILS.IN');
    chon:=readkey; writeln(chon);
    fin:='DETAILS.IN'+chon;
    writeln; writeln; writeln;
    Nhapdl;
    Cham;
    writeln; writeln; writeln;
    writeln('           $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$');
    writeln('                            Diem: ', diem);
    writeln('           $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$');
    readln;
END.
