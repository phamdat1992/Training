uses crt;
CONST MaxN = 1000;
      fIn: string = 'WIRES.IN';
      fou: string = 'wires.out';
      Dapso: array['0'..'9'] of integer = (
      61, 6,  6, 1, 9, 16, 50, 48, 51, 58);
var
    f   : text;
    p, p1: array[1..1000] of integer;
    chon: char;
    n   : integer;
    diem: integer;
    Ok  : boolean;

procedure Cham;
var s, t, i, j: integer;
begin
   assign(f, fin); reset(f);
   readln(f,n);
   for i:=1 to n do
   begin
      read(f,t);
      p[t]:=i;
   end;
   close(f);
   diem:=0; Ok:= false;
   assign(f, fou);
   {$I-}
   reset(f);
   {$I+}
   if IOResult <> 0 then
   begin
     writeln;
     writeln('???????????????????????????????????????????????????????');
     writeln('>>>>>>>>>>>>>   Cannot find file: ', fou);
     writeln('???????????????????????????????????????????????????????');
     writeln;
     exit;
   end
   else
   begin
       Ok:=true;
       close(f);
   end;
   assign(f,fou); reset(f);
   readln(f,s);
   for i:=1 to s do
   begin
      read(f,t);
      if (t<1) or (t>n) then
      begin
          writeln;
          writeln('?????????????????????????????????????????????');
          writeln('     E R R O R:   Khong co chi so: ',t);
          writeln('?????????????????????????????????????????????');
          exit;
      end;
      p1[i]:=t;
   end;
   close(f);
   for i:=1 to s-1 do
       for j:= i+1 to s do
           if p[p1[i]] >= p[p1[j]] then
           begin
               writeln;
               writeln('?????????????????????????????????????????????');
               writeln('     E R R O R:   Duong noi cat nhau! ');
               writeln('     Doan noi hai diem ',p1[i],' va ', p1[j]);
               writeln('?????????????????????????????????????????????');
               exit;
           end;
   if s=dapso[chon] then diem:=1
   else
   begin
           writeln('????????????????????????????????????????????');
           writeln('     ERROR:   ');
           writeln('            Tim duoc: ',s);
           writeln('            Dap so   : ',dapso[chon]);
           writeln('????????????????????????????????????????????');
           exit;
   end;
   writeln;
   writeln('$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$');
   writeln('        C O R R E C T!');
   writeln('$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$');
end;

BEGIN
     clrscr;
     writeln('     CHUONG TRINH CHAM BAI: WIRES');
     writeln('     ==============================');
     write  ('        Cho ten file: WIRES.IN'); chon:=readkey;
     writeln(chon); writeln;
     fin:= 'WIRES.IN'+chon;
     Cham;
     writeln; writeln; writeln;
     writeln('                  ***************************');
     writeln('                           Diem: ',diem:3);
     writeln('                  ***************************');
     if Ok then
     begin
         writeln; writeln;
         writeln('>>>>>>>>>>>>>>>>>>>>>  The file ',fou,' was deleted! ');
         Erase(F);
     end;
     readln;
END.
