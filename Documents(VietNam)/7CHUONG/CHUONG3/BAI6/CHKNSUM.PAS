uses crt;
const
     fin: string ='NETSUM.IN1';
     fou: string ='NETSUM.OUT';
     dapso: array['1'..'7'] of integer =
     (1, 30, 28, 74, 511, 23650, 500);

var
   f: text;
   a: array[1..100, 1..100] of integer;
   n, k: integer;
   sum: longint;
   ans: longint;
   diem: real;
   chon: char;

procedure Cham;
var i,j, p, q: integer;
begin
   assign(f,fin); reset(f);
   readln(f, n, k);
   for i:=1 to n do
      for j:=1 to n do read(f,a[i,j]);
   close(f);
   diem:=0;
   assign(f,fou); reset(f);
   readln(f, ans);
   if ans<>dapso[chon] then
   begin
       writeln('????????????????????????????????????????');
       writeln('       E R R O R:  Khong toi uu!');
       writeln('????????????????????????????????????????');
       exit;
   end;
   diem:=diem+0.5;
   sum:=0;
   for i:=1 to k do
   begin
      readln(f,p,q);
      if (p<1) or (p>n) or (q<1) or (q>n) then
      begin
          writeln('????????????????????????????????????????');
          writeln('       E R R O R:  Loi chi so!');
          writeln('????????????????????????????????????????');
          exit;
      end;
      sum:=sum+ a[p,q];
   end;
   close(f);
   if sum<>ans then
   begin
       writeln('????????????????????????????????????????');
       writeln('              E R R O R:  ');
       writeln('     Duong di co chi phi khong khop!');
       writeln('????????????????????????????????????????');
       exit;
   end;
   if chon = '1' then diem:=diem+0.5
   else diem:=diem+1.0;
   writeln; writeln; writeln;
   writeln('###################################');
   writeln('         P E R F E C T !');
   writeln('###################################');
end;

BEGIN
    clrscr;
    writeln('           ============================================');
    writeln('                   CHUONG TRINH CHAM BAI: NETSUM');
    writeln('           ============================================');
    write  ('                 Cho ten file du lieu: NETSUM.IN');
    chon:=readkey; writeln(chon);
    fin:='NETSUM.IN'+chon;
    Cham;
    writeln; writeln; writeln;
    writeln('           $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$');
    writeln('                            Diem: ', diem:4:1);
    writeln('           $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$');
    readln;
END.






