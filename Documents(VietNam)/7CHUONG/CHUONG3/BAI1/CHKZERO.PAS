{$A+,B-,D+,E+,F-,G-,I+,L+,N-,O-,P-,Q+,R+,S+,T-,V+,X+,Y+}
{$M 16384,0,655360}
uses crt;
const
    fin: string='ZEROPATH.INP';
    fou: string='ZEROPATH.OUT';

var
   s: longint;
   f: text;
   chon: char;
   diem: integer;
   i  : integer;
   num, numds: array[0..10000] of integer;
   flag: array [0..10001] of byte;
   j, m, n: integer;
   count: longint;

procedure Solve;
begin
  assign(f, fin); reset(f);
  readln(f, n);
  close(f);
  flag[n]:=1;
  for i:= n downto 1 do
    if (flag[i]=1) then
    begin
      m:= round((sqrt(i)+1.0e-12));
      for j:=1 to m do
        if (i mod j = 0) then
          flag[(j-1)*(i div j+1)]:=1;
    end;
  count:=0;
  for i:=0 to n-1 do
    if flag[i] =1 then
    begin
       inc(count);
       numds[count]:=i;
    end;
end;

procedure Cham;
begin
   diem:=0;
   Solve;
   assign(f, fou); reset(f); readln(f,s);
   if s<> count then
   begin
        writeln;
        writeln('??????????????????????????????????????????????????');
        writeln('       E R R O R:   Khong dung dap so!');
        writeln('       So phan tu cua day tim duoc: ',s);
        writeln('                            Dap so: ', count);
        writeln('??????????????????????????????????????????????????');
        exit;
   end;
   num[0]:=0;
   for i:=1 to s do
   begin
      read(f, num[i]);
      if num[i]< num[i-1] then
      begin
         writeln;
         writeln('??????????????????????????????????????????????????');
         writeln('       E R R O R:   Khong theo thu tu tang dan!');
         writeln('??????????????????????????????????????????????????');
         exit;
      end;
      if num[i]<> numds[i] then
      begin
         writeln;
         writeln('??????????????????????????????????????????????????');
         writeln('    E R R O R: Khong phai phan tu cua duong di!');
         writeln('??????????????????????????????????????????????????');
         exit;
      end;
   end;
   writeln; writeln; writeln; writeln;
   writeln('**********************************');
   writeln('         C O R R E C T !');
   writeln('**********************************');
   diem:=1;
end;

BEGIN
   clrscr;
   writeln('            ============================================');
   writeln('                CHUONG TRINH CHAM BAI HANOI ZERO PATH');
   writeln('            ============================================');
   write  ('                Cho ten file test: ZEROPATH.IN'); chon:=readkey;
   writeln(chon); writeln;
   fin:='ZEROPATH.IN'+ chon;
   Cham;
   writeln;    writeln;   writeln;
   writeln('                    $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$');
   writeln('                              Diem: ' , diem);
   writeln('                    $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$');
   readln;
END.


